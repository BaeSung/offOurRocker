# Off Our Rocker — 프로젝트 현황

## 앱 개요

한국어 작가를 위한 데스크톱 집필 앱. Electron + React + TipTap + SQLite 기반.

---

## 현재 구현된 기능

### 에디터

| 기능 | 상태 |
|------|------|
| TipTap 리치 텍스트 에디터 | 완료 |
| 서식 (굵게, 기울임, 취소선, 밑줄) | 완료 |
| 제목 (H1, H2, H3) | 완료 |
| 인용문, 구분선 | 완료 |
| 이미지 삽입 (TipTap 기본) | 완료 |
| 자동 저장 (설정 가능 간격) | 완료 (버그 수정됨) |
| 수동 저장 (Ctrl+S) | 완료 |
| 글자수 표시 (공백 포함/제외 전환) | 완료 |
| 원고지 매수 환산 | 완료 |
| 커서 위치 (줄/열) | 완료 |
| 읽기 예상 시간 | 완료 |
| 에디터 모드 — 일반 | 완료 |
| 에디터 모드 — 집중 모드 (비네팅 효과) | 완료 |
| 에디터 모드 — 미리보기 (출판 스타일) | 완료 |
| 각주 삽입 | 버튼만 존재, 미구현 |
| 삽화 삽입 (AI 생성 + 업로드) | 완료 |
| 이미지 크기·정렬 조작 (플로팅 메뉴) | 완료 |

### 작품 관리

| 기능 | 상태 |
|------|------|
| 장편소설 (챕터 구조) | 완료 |
| 단편소설 (단일 본문) | 완료 |
| 시리즈 (작품 그룹) | 완료 |
| 작품 생성 (제목, 유형, 장르, 태그, 목표, 마감일) | 완료 |
| 작품 삭제 (소프트 삭제) | 완료 |
| 작품 복제 | 완료 |
| 작품 상태 변경 (집필중/퇴고중/완료) | 완료 |
| 작품 제목 인라인 편집 | 완료 |
| 챕터 추가/삭제 | 완료 |
| 챕터 순서 변경 | 완료 |
| 챕터 제목 인라인 편집 | 완료 (버그 수정됨) |
| 장르 분류 (공포, SF, 순문학, 판타지, 기타) | 완료 |

### 대시보드

| 기능 | 상태 |
|------|------|
| 시간대별 인사말 | 완료 |
| 요약 카드 (총 작품, 진행중, 총 글자수) | 완료 |
| 주간 집필 활동 차트 | 완료 |
| 최근 작품 목록 | 완료 |
| 장르 분포 파이 차트 | 완료 |
| 월간 집필 캘린더 (히트맵) | 완료 |
| 목표 진행도 트래커 | 완료 |

### 검색 / 탐색

| 기능 | 상태 |
|------|------|
| 전체 검색 (작품 제목, 챕터 제목, 본문) | 완료 |
| 검색 결과 스니펫 미리보기 | 완료 |
| 사이드바 트리 뷰 탐색 | 완료 |

### 버전 관리 / 백업

| 기능 | 상태 |
|------|------|
| 수동 스냅샷 생성 | 완료 |
| 버전 미리보기 | 완료 |
| 버전 복원 | 완료 |
| 버전 삭제 | 완료 |
| 수동 백업 (DB 파일 복사) | 완료 |
| 자동 백업 (일간/주간) | 완료 |
| DB 내보내기/가져오기 | 완료 |

### 내보내기

| 기능 | 상태 |
|------|------|
| 마크다운 내보내기 | 완료 |
| 텍스트 내보내기 | 완료 |
| HTML 내보내기 | 완료 |
| 인쇄 (window.print) | 완료 |

### 휴지통

| 기능 | 상태 |
|------|------|
| 삭제된 작품 목록 | 완료 |
| 작품 복원 | 완료 |
| 영구 삭제 | 완료 |
| 휴지통 비우기 (확인 다이얼로그) | 완료 |

### AI 기능

| 기능 | 상태 |
|------|------|
| AI 맞춤법 검사 (OpenAI / Anthropic) | 완료 |
| 맞춤법 수정 개별/일괄 적용 | 완료 |
| API 키 암호화 저장 | 완료 |
| 연결 테스트 | 완료 |
| AI 이미지 생성 (삽화 + 표지) | 완료 |

### 설정

| 기능 | 상태 |
|------|------|
| 테마 (다크/라이트/시스템) | 완료 |
| 포인트 컬러 (5종) | 완료 |
| 에디터 폰트 / 크기 / 줄간격 / 너비 | 완료 |
| 자동 저장 간격 조절 (10초~5분) | 완료 |
| 들여쓰기 설정 | 완료 |
| 저장 위치 / 백업 위치 선택 | 완료 |
| 키보드 단축키 커스터마이징 | 완료 |
| 시작 설정 (마지막 작품 열기 등) | 완료 |
| 언어 전환 (한국어/영어) | UI만 존재, 미구현 |

### 배포

| 항목 | 상태 |
|------|------|
| NSIS 설치 파일 빌드 | 완료 |
| MS Store (AppX) 빌드 설정 | 설정 완료, 파트너센터 등록 필요 |
| 자동 업데이트 (electron-updater) | 코드 존재, 서버 미설정 |
| 코드 서명 | 미적용 |

---

## 수정 이력 (이번 세션)

| # | 문제 | 수정 내용 |
|---|------|-----------|
| 1 | 자동 저장 작동 안함 | useEffect 의존성 배열에서 isDirty/content 제거, getState()로 변경 |
| 2 | 챕터 제목 편집 미구현 | handleChapterTitleChange에 updateChapter IPC 연결 |
| 3 | 단편 저장 시 writing_log 미기록 | WORKS_SAVE_CONTENT에 글자수 diff 기록 로직 추가 |
| 4 | 검색 N+1 쿼리 | JOIN에서 workTitle을 함께 SELECT하도록 수정 |
| 5 | 시리즈 생성 더블 클릭 가능 | creating 상태 + disabled 속성 추가 |
| 6 | trash.ts console.log 잔존 | 3곳 제거 |

---

## 추가 기능 아이디어

### 에디터 강화
- **찾기/바꾸기** — 에디터 내 텍스트 검색 및 치환 (Ctrl+H)
- **되돌리기/다시 실행 히스토리** — 시각적 실행취소 타임라인
- **각주 기능 구현** — 버튼은 있으나 기능 미연결
- **삽화 삽입 개선** — 로컬 이미지 선택 다이얼로그 연결
- **마크다운 단축 입력** — `##` 입력 시 자동 제목 변환 등
- **드래그 앤 드롭 이미지** — 에디터에 이미지 파일 드롭

### 글쓰기 보조
- **AI 문장 다듬기** — 선택한 텍스트의 문체/어투 개선 제안
- **AI 이어 쓰기** — 커서 위치에서 다음 문장 제안
- **동의어/유의어 사전** — 단어 선택 시 대안 제시
- **인물 사전** — 등장인물 이름/특징 관리 패널
- **세계관 메모** — 작품별 설정 노트

### 생산성
- **포모도로 타이머** — 집중 모드와 연동한 타이머
- **일간/주간 집필 목표** — "오늘 1000자" 같은 세션 목표
- **타자 효과음** — 설정에 있으나 미구현, 타이핑 사운드 추가
- **집중 모드 BGM** — 백색소음/앰비언트 재생

### 관리 / 구조
- **챕터 드래그 정렬** — 사이드바에서 드래그 앤 드롭으로 순서 변경
- **작품 간 챕터 이동** — 챕터를 다른 작품으로 이동
- **작품 병합** — 여러 단편을 하나의 장편으로 통합
- **태그 필터링** — 태그별 작품 필터
- **자동 백업 스케줄러** — 설정은 있으나 실제 주기적 백업 미구현

### 내보내기 확장
- **EPUB 내보내기** — 전자책 포맷
- **PDF 내보내기** — 인쇄용 조판
- **DOCX 내보내기** — 출판사 제출용
- **공모전 포맷 내보내기** — 원고지 스타일 PDF

### 배포 / 운영
- **MS Store 게시** — AppX 빌드 설정 완료, 파트너센터 등록 후 게시
- **자동 업데이트 연동** — GitHub Releases 또는 MS Store 업데이트
- **앱 아이콘 제작** — 현재 기본 Electron 아이콘 사용 중
